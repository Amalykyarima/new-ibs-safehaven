<div class="w-full py-[32px] px-[40px] flex flex-col gap-[24px]">
  <div class="w-full flex items-center justify-between">
    <div (click)="routeBack()" class="flex items-center cursor-pointer">
      <img src="../../../../assets/icons/back-arrow.svg" alt="" /><span
        class="text-[14px] font-[600] text-[#334155]"
        >Back</span
      >
    </div>
    <div class="w-full max-w-[203px]">
      <app-button-filled
        [bg]="'bg-[#EF4444]'"
        [height]="'h-[44px]'"
        [text]="'End Recurring Transfer'"
        [action]="endRecurringTransfer"
      />
    </div>
  </div>
  <span class="font-[700] text-[20px] text-[#1E293B]">Transaction Details</span>
  <div class="w-full flex items-start gap-[56px]">
    <div class="w-full max-w-[582px] flex flex-col gap-[24px]">
      <div class="w-full rounded-[10px] bg-white flex flex-col gap-[19px]">
        <div class="w-full flex gap-[19px] items-center pt-[25px] px-[24px]">
          <app-avatar-icon />
          <div class="flex flex-col gap-[2px]">
            <span class="font-[600] text-[16px] text-[#1E293B]"
              >Kedonojo Ameh</span
            >
            <span class="font-[500] text-[16px] text-[#64748B]">109099879</span>
            <span class="font-[500] text-[16px] text-[#64748B]"
              >Access Bank of Nigeria PLC.</span
            >
          </div>
        </div>
        <div class="border-[0.5px] border-[#F1F5F9] w-full"></div>
        <div class="w-full flex flex-col gap-[20px] px-[24px] pb-[18px]">
          <div class="w-full flex justify-between items-center">
            <span class="font-[500] text-[16px] text-[#64748B]">Amount</span>
            <span class="font-[600] text-[16px] text-[#1E293B]">₦2,500.00</span>
          </div>
          <div class="w-full flex justify-between items-center">
            <span class="font-[500] text-[16px] text-[#64748B]">Fees</span>
            <span class="font-[600] text-[16px] text-[#1E293B]">₦10.00</span>
          </div>
          <div class="w-full flex justify-between items-center">
            <span class="font-[500] text-[16px] text-[#64748B]"
              >Total Amount Due</span
            >
            <span class="font-[600] text-[16px] text-[#1E293B]">₦2,510.00</span>
          </div>
        </div>
      </div>
      <div
        class="bg-[#fff] rounded-[20px] py-[20px] px-[24px] flex flex-col gap-[4px]"
      >
        <span class="text-[16px] font-[500] text-[#64748B]">Narration</span>
        <span class="text-[16px] font-[600] text-[#1E293B]"
          >Spoil yourself on Valentines</span
        >
      </div>
      <div
      class="bg-[#fff] rounded-[20px] py-[20px] px-[16px] flex flex-col gap-[20px]"
    >
      <span class="font-[600] text-[16px] text-[#1E293B]">Recurring Transaction</span>
      <div class="w-full flex flex-col gap-[20px]">
        <div class="w-full flex justify-between items-center">
          <span class="font-[500] text-[16px] text-[#64748B]">Frequency</span>
          <span class="font-[600] text-[16px] text-[#1E293B]">Weekly</span>
        </div>
        <div class="w-full flex justify-between items-center">
          <span class="font-[500] text-[16px] text-[#64748B]">Start Date</span>
          <span class="font-[600] text-[16px] text-[#1E293B]">14th FEB, 2025</span>
        </div>
        <div class="w-full flex justify-between items-center">
          <span class="font-[500] text-[16px] text-[#64748B]"
            >End Date</span
          >
          <span class="font-[600] text-[16px] text-[#1E293B]">14th APR, 2025</span>
        </div>
        <div class="w-full flex justify-between items-center">
            <span class="font-[500] text-[16px] text-[#64748B]"
              >Auto Retry</span
            >
            <span class="font-[600] text-[16px] text-[#1E293B]">Enabled</span>
          </div>
      </div>
    </div>
    <div class="w-full flex flex-col bg-[#fff] rounded-[20px]">
        <div
          class="w-full items-center justify-between px-[24px] pt-[24px] pb-[12px] flex"
        >
          <span class="font-[600] text-[14px] text-[#64748B]">SEND FROM</span>
          <div class="flex items-center gap-[4px]">
            <span class="font-[600] text-[14px] text-[#1E293B]"
              >Bal: <span></span>******</span
            ><img src="../../../../assets/icons/eye-balance.svg" alt="" />
          </div>
        </div>
        <div
          class="w-full items-center justify-between flex border-t border-[#F1F5F9] border-[0.5px] py-[20px] px-[24px] rounded-t-[20px]"
        >
          <div class="flex gap-[12px] items-center">
            <img src="../../../../assets/images/name-bar.svg" alt="" />
            <div class="flex flex-col gap-[8px]">
              <span class="font-[600] text-[16px] text-[#1E293B]"
                >Kedonojo Ameh/Flexing</span
              >
              <div class="flex items-center gap-[8px]">
                <span class="font-[500] text-[16px] text-[#1E293B]"
                  >1021678900</span
                ><span
                  class="bg-[#EBF5FF] rounded-[4px] px-[6px] py-[3px] text-[14px] font-[500] text-[#034EA2]"
                  >Savings</span
                >
              </div>
            </div>
          </div>
          <div
            class="border border-[#CBD5E1] rounded-[10px] px-[16px] pt-[9.5px] pb-[10.5px]"
          >
            <span class="text-[14px] font-[600] text-[#334155]">Change</span>
          </div>
        </div>
      </div>
    </div>
    <div class="w-full max-w-[462px] flex flex-col gap-[24px]">
      <div
        class="w-full bg-white rounded-[20px] p-[20px] flex flex-col gap-[16px]"
      >
        <div class="w-full flex items-center justify-between">
            <span class="font-[600] text-[16px] text-[#1E293B]">Next Payment</span>
            <div *ngIf="transferState === 'failed'" class="flex gap-[4px] items-center bg-[#FEF2F2] rounded-[4px] py-[5px] px-[6px]">
                <img src="../../../../assets/icons/red-failed.svg" alt="">
                <span class="font-[500] text-[14px] text-[#EF4444]">Transfer Failed</span>
            </div>
        </div>
       <div class="w-full flex items-center justify-between">
        <div class="flex items-center gap-[8px]">
            <div
              class="rounded-[18px] w-[50px] h-[50px] bg-[#F8FAFC] flex items-center justify-center"
            >
              <img src="../../../../assets/icons/folder.svg" alt="" />
            </div>
            <div class="flex flex-col gap-[4px]">
              <span class="font-[600] text-[16px] text-[#1E293B]"
                >Transfer 06</span
              >
              <span class="font-[500] text-[14px] text-[#64748B]"
                >20th Sep, 2024</span
              >
            </div>
          </div>
          <div class="flex items-center gap-[8px]">
            <div *ngIf="transferState === 'successful'" class="flex gap-[4px] items-center bg-[#DCFCE7] rounded-[4px] py-[5px] px-[6px]">
                <img src="../../../../assets/icons/green-success.svg" alt="">
                <span class="font-[500] text-[14px] text-[#16A34A]">Successful</span>
            </div>
            <div *ngIf="transferState === 'failed'" class="w-[62px]">
                <app-button-filled [bg]="'bg-[#1E1E1E]'" [height]="'h-[30px]'" [action]="retryTransfer" [text]="'Retry'" />
            </div>
            <img src="../../../../assets/icons/chevron-right.svg" alt="">
          </div>
       </div>
      </div>
      <div (click)="store.openModal('transfer-records')"
        class="w-full bg-white rounded-[20px] p-[20px] cursor-pointer flex flex-col gap-[20px]"
      >
        <div class="w-full flex flex-col gap-[14px]">
          <div class="w-full flex items-center justify-between">
            <span class="font-[600] text-[16px] text-[#1E293B]"
              >Transaction Records</span
            >
            <img src="../../../../assets/icons/chevron-right.svg" alt="" />
          </div>
          <span class="font-[500] text-[14px] text-[#64748B]"
            >This transaction reoccurred a total of
            <span class="text-[#1E293B] font-[600]">8</span> times</span
          >
        </div>
        <div class="w-full flex flex-col gap-[14px]">
          <span class="text-[14px] font-[600] text-[#64748B]"
            >RECORD SUMMARY</span
          >
          <div class="items-center flex w-full gap-[20px]">
            <div class="flex items-center gap-[8px]">
              <div class="w-[3px] rounded-[3px] bg-[#22C55E] h-[38px]"></div>
              <div class="w-full flex flex-col gap-[5px]">
                <span class="font-[600] text-[14px] text-[#64748B]"
                  >Successful Transfers</span
                >
                <span class="font-[600] text-[16px] text-[#1E293B]">6</span>
              </div>
            </div>
            <div class="flex items-center gap-[8px]">
              <div class="w-[3px] rounded-[3px] bg-[#EF4444] h-[38px]"></div>
              <div class="w-full flex flex-col gap-[5px]">
                <span class="font-[600] text-[14px] text-[#64748B]"
                  >Failed Transfers</span
                >
                <span class="font-[600] text-[16px] text-[#1E293B]">2</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-modal *ngIf="activeModal() as view">
    <ng-container [ngSwitch]="view">
        <app-confirmation *ngSwitchCase="'confirmation'" [message]="'Are you sure you want to end this recurring transfer? Note, this action cannot be undone'" [title]="'End Recurring Transfer'" />
        <app-transfer-records *ngSwitchCase="'transfer-records'" />
      <!-- Optional fallback -->
      <div *ngSwitchDefault>Unknown modal type</div>
    </ng-container>
  </app-modal>
